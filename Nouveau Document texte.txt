"""""
class DatabaseManager:
    def __init__(self):
        self.config = Config.DB_CONFIG
    
    def get_connection(self):
        try:
            conn = psycopg2.connect(**self.config)
            return conn
        except Exception as e:
            print(f"Erreur de connexion à la base de données: {e}")
            return None
    
    def init_db(self):
        conn = self.get_connection()
        if not conn:
            return False
        
        try:
            cur = conn.cursor()
            
            # Table des utilisateurs
            cur.execute("""
                CREATE TABLE IF NOT EXISTS users (
                    id SERIAL PRIMARY KEY,
                    public_id VARCHAR(100) UNIQUE NOT NULL,
                    email VARCHAR(120) UNIQUE NOT NULL,
                    password_hash VARCHAR(200) NOT NULL,
                    first_name VARCHAR(100),
                    last_name VARCHAR(100),
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    last_login TIMESTAMP,
                    is_active BOOLEAN DEFAULT TRUE
                )
            """)

            """
            
            # Table des conversations (liée aux utilisateurs)
            cur.execute("""
                CREATE TABLE IF NOT EXISTS conversations (
                    id SERIAL PRIMARY KEY,
                    user_id INTEGER REFERENCES users(id),
                    user_message TEXT NOT NULL,
                    bot_response TEXT NOT NULL,
                    category VARCHAR(100),
                    confidence FLOAT,
                    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                )
            """)
            
            # Table des questions fréquentes
            cur.execute("""
                CREATE TABLE IF NOT EXISTS faq_stats (
                    id SERIAL PRIMARY KEY,
                    user_id INTEGER REFERENCES users(id),
                    question TEXT NOT NULL,
                    category VARCHAR(100),
                    count INTEGER DEFAULT 1,
                    last_asked TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                )
            """)
            
            conn.commit()
            cur.close()
            conn.close()
            print("Base de données initialisée avec succès")
            return True
            
        except Exception as e:
            print(f"Erreur lors de l'initialisation: {e}")
            return False
        
        """